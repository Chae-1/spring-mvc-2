타임 리프
==
- 네츄럴 템플릿
- 서버 사이드 HTML 렌더링
- 스프링 통합 지원

**서버 사이드 렌더링(SSR)**

백엔드 서버에서 HTML을 렌더랑하는 용도로 사용한다.


**네츄럴 템플릿**

순수 HTML을 유지하면서 뷰 템플릿으로도 사용할 수 있는 템플릿을 네츄럴 템플릿이라 한다.


## 타임 리프 - 기본 기능 

#### 텍스트 - text, utext
- HTML 태그의 속성을 렌더링할 때, 동적으로 바꾸는 기능
- 콘텐츠를 교체하기 위해서 `th:text`를 사용한다.
- `th:text`는 태그를 사용해야하지만, 직접 내용을 삽입하기 위해선 `[[${}]]` 문법을 사용한다.

**Escape**
- 태그에서 `<`, `>`를 사용하기 때문에, 내부에서 사용하기 때문에 템플릿에서 생성하면 Escape처리가 된다.
- `th:text`, `[[${}]]`에서는 Escape를 사용한다.
- 사용하지 않기 위해선 `th:utext`를 사용하고 `[[]]` 대신, `[()]`를 사용한다.


#### SpringEL - 변수 표현식
- 변수 표현식 - `${...}`
- SpringEL 표현식
  - Object: ${user.username}, ${user['username']}, ${user.getUsername()}
  - List: ${user[0]}
  - Map: ${userMap['key']}
 
#### th:with
지역 변수를 선언할 수 있다.

#### 기본 객체
- `${#locale}` - locale
스프링이 제공하는 표현식을 사용할 수도 있다.

#### 편의 객체
- Request parameter 조회 시, `${param}`을 통해 조회할 수 있다.
- Session 객체에 담긴 속성을 조회할 때, 바로 조회할 수 있다.
- Spring bean을 직접 호출할 수 있다.


#### 유틸리티 객체
- `#message` : 메세지, 국제화 처리
- `#urls`: URI 이스케이프를 지원한다.
- `#dates`: java.util.Data 서식 지원
- `#calenders`: java.util.Calender 서식 지원
- `#temporals`: 자바8 날짜 지원
- `#numbers`: 숫자 서식을 지원

추가적으로 각종 편의 객체가 제공된다.

#### URL 링크
URL을 생성할 때는 `@{}` 문법을 사용한다.

- `@{/hello(param1=data)}`
  - URL이 /hello, 경로 변수가 아닌, 쿼리 파라미터 param1=data가 추가된다.
- `@{/hello/{param1}(param1=${param1}, param2=${param2})}`
  - URL이 /hello/param1, 괄호안에 사용되지 않은 변수는, 쿼리 파라미터로 추가된다.


#### 리터럴
소스 코드상에 고정된 값을 말하는 용어

타임리프에서 지원하는 리터럴
- 문자
- 숫자
- boolean
- null

공백이 포함된 문자 리터럴에 항상 작은 따움표로 감싸야한다.
- ex) `<span th:text="'hello world'"></span>`

작은 따움표를 추가하는 불편함을 해결해주는 리터럴 대체 문법이 존재한다. 
- `||` 
- ex) `<span th:text="|hello world|">`


#### 연산
대소 비교를 위해 HTTP 엔티티를 활용한다는 점을 제외하면, Java에서 지원하는 연산과 동일하다.

Elvis 연산, No_Operation을 제공한다.

- `${data}?: 'dd'`
  - ?:를 Elvis 연산이라고 한다.
  - 데이터가 없다면, 'dd'를 출력한다.


#### 속성 값 설정
타임리프가 렌더링 될 때, HTML의 속성을 `th:***`로 지정한 속성으로 대체가 된다.
- ex) <input type=text name="mock" th:name="user"/>
  - 타임리프 렌더링 이전에는 name 속성이 mock이지만 렌더링 후에는 user가 된다.

**속성 추가**
- th:attrappend: 속성값 뒤에 값을 추가한다.
- th:attrprepend: 속성값 앞에 값을 추가한다.
- th:classappend: class 속성에 자연스럽게 추가한다.

**checked 처리**
HTML에서 `checked` 속성이 존재하면, 값에 상관없이 체크처리가 된다.

`th:checked`가 false일 때, 속성자체를 제거한다.

#### 반복
타임리프에서 반복문은 `th:each`를 사용하면 된다.


#### 조건부 평가
`if`, `unless`(`if`의 반대)


#### 주석
HTML 주석
- HTML에서 사용하는 주석이다.
- `<!--...-->`
- 주석 내용이 렌더링 된다.

타임리프 파서 주석
- 타임리프의 주석이다. 주석 내용을 렌더링 하지 않는다.
- `<!--/*...*/-->`

타임리프 프로토타입 주석
- 타임리프로 렌더링 시 내부에 있는 내용을 보여주고, 그것이 아니라면 주석으로 남아있게 처리.
- `<!--/*/.../*/-->`


#### 블록
`th:block`, 타임리프 자체 태그이다.
- `th:each`만으로 해결하기 힘든 문제상황일 경우, 사용한다.


#### 자바스크립트 인라인
자바스크립트에서 타임리프를 편리하게 사용할 수 있도록 인라인 기능 제공

**텍스트 렌더링**
- 인라인 사용 전 -> 변수의 이름이 그대로 남아있다.
- 인라인 사용 후 -> 변수의 이름에 ""를 추가


**자바스크립트 내추럴 템플릿**
- 주석을 활용해 동적으로 변수를 교체할 수 있다.
- ex) let username = /*[[${user.username}]]*/ "text";
- 타임리프로 렌더링 시, username을, 아니라면 "text"라는 텍스트로 렌더링된다.

**객체**
- 사용 전은 toString을 호출한 결과값
- 사용 후는 Json으로 변환해준다.


#### 자바스크립트 인라인 each
자바스크립트에서 each를 지원한다.


#### 템플릿 조각
푸터나, 헤더같은 공통 영역들의 유지 보수 문제를 해결하기 위해 템플릿 조각, 레이아웃 기능을 지원.
- `th:insert`: 지정한 템플릿을 삽입한다.
- `th:replace`: 지정한 템플릿을 대체한다.
- 경로를 지정할 때, `~{...}`을 사용한다.


#### 템플릿 레이아웃
- fragment 변수 전달을 통해 태그 자체를 넘길 수 있다.
- 태그 자체를 넘길 때, `~{::tag}` 문법을 사용한다.
